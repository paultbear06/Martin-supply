<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Martin Family Supply</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body class="bg-slate-100 pb-20">

    <header class="bg-slate-900 text-white p-5 sticky top-0 z-50 shadow-lg">
        <h1 class="text-xl font-bold tracking-tight text-center">MARTIN FAMILY <span class="text-blue-400">SUPPLY</span></h1>
        <p class="text-[10px] text-center text-slate-400 uppercase tracking-[.2em] mt-1">Live Inventory</p>
    </header>

    <main id="storefront-view" class="p-4 grid grid-cols-1 gap-6">
        <div id="loading" class="text-center py-20 text-slate-400 font-bold animate-pulse">SYNCING WITH WAREHOUSE...</div>
    </main>

    <script>
        // PASTE YOUR GOOGLE SHEET CSV LINK HERE
        const SHEET_CSV_URL = https://docs.google.com/spreadsheets/d/e/2PACX-1vTEH1l5fDoY0W52E0Ie1n9Jo1zABZ1mFRfa698ZtF8OLNb7rilj3VT0yifYZaL8_e8L62PoNomrlj1y/pub?output=csv

        async function fetchInventory() {
            try {
                // We change the end of the link to /pub?output=csv to read the data
                const response = await fetch(SHEET_CSV_URL.replace('/edit?usp=sharing', '/pub?output=csv'));
                const data = await response.text();
                
                // Convert CSV text to an array of objects
                const rows = data.split('\n').slice(1); 
                const inventory = rows.map(row => {
                    const [name, price, special, image] = row.split(',');
                    return { name, price, special, image };
                });

                render(inventory);
            } catch (error) {
                document.getElementById('loading').innerText = "Connection Error. Check Sheet Link.";
            }
        }

        function render(items) {
            const store = document.getElementById('storefront-view');
            store.innerHTML = '';

            items.forEach(item => {
                if(!item.name) return; // Skip empty rows
                store.innerHTML += `
                    <div class="bg-white rounded-3xl shadow-md overflow-hidden border border-slate-200">
                        ${item.image ? `<img src="${item.image}" class="w-full h-64 object-cover">` : '<div class="h-40 bg-slate-200"></div>'}
                        <div class="p-6">
                            ${item.special ? `<span class="bg-red-600 text-white text-[10px] font-black px-3 py-1 rounded-full uppercase">${item.special}</span>` : ''}
                            <h3 class="text-2xl font-black text-slate-800 mt-2">${item.name}</h3>
                            <p class="text-3xl font-black text-blue-600 mt-2">$${parseFloat(item.price).toFixed(2)}</p>
                            <button class="w-full mt-5 bg-slate-900 text-white py-4 rounded-2xl font-black uppercase tracking-widest active:scale-95 transition">Contact to Order</button>
                        </div>
                    </div>
                `;
            });
        }

        fetchInventory();
    </script>
</body>
</html>
