<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Martin Supply Admin</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .hidden { display: none !important; }
    </style>
</head>
<body class="bg-gray-100">

    <header class="bg-black text-white p-10 text-center border-b-4 border-blue-600">
        <h1 class="text-3xl font-black uppercase">MARTIN FAMILY SUPPLY</h1>
        <p id="display-slogan" class="text-blue-300 italic mt-2">Quality Tools & Service</p>
    </header>

    <div class="flex justify-between p-4">
        <a href="index.html" class="text-sm font-bold text-gray-500 underline">HOME</a>
        <button onclick="unlock()" class="bg-blue-600 text-white px-4 py-2 rounded font-bold text-xs uppercase">⚙️ MANAGE SITE</button>
    </div>

    <div id="shop-grid" class="p-4 grid grid-cols-1 md:grid-cols-2 gap-4"></div>

    <div id="admin-box" class="hidden fixed inset-0 bg-white p-6 z-[999] overflow-scroll">
        <div class="flex justify-between mb-6">
            <h2 class="font-black text-xl">MANAGER</h2>
            <button onclick="document.getElementById('admin-box').classList.add('hidden')" class="bg-gray-200 p-2 text-xs font-bold">CLOSE</button>
        </div>

        <div class="bg-gray-50 p-4 rounded-xl border-2 border-dashed border-gray-300 mb-6">
            <p class="font-bold text-xs mb-2">ADD NEW ITEM</p>
            <input id="in-name" type="text" placeholder="Item Name" class="w-full mb-2 p-3 border">
            <input id="in-price" type="text" placeholder="Price" class="w-full mb-2 p-3 border">
            <input id="in-img" type="text" placeholder="Image Link" class="w-full mb-4 p-3 border">
            <button onclick="add()" class="w-full bg-black text-white py-3 font-bold uppercase">Save to Shop</button>
        </div>

        <div id="list-items" class="space-y-2"></div>
    </div>

    <script>
        let db = JSON.parse(localStorage.getItem('m_data')) || [];

        function draw() {
            localStorage.setItem('m_data', JSON.stringify(db));
            const g = document.getElementById('shop-grid');
            const l = document.getElementById('list-items');
            
            g.innerHTML = db.map(i => `
                <div class="bg-white p-4 rounded shadow">
                    <img src="${i.img}" class="w-full h-40 object-cover mb-2">
                    <p class="font-bold uppercase">${i.name}</p>
                    <p class="text-xl font-black">$${i.price}</p>
                </div>
            `).join('');

            l.innerHTML = db.map((i, idx) => `
                <div class="flex justify-between bg-gray-100 p-2 rounded text-sm">
                    <span>${i.name}</span>
                    <button onclick="del(${idx})" class="text-red-600 font-bold">REMOVE</button>
                </div>
            `).join('');
        }

        function unlock() {
            let p = prompt("Password:");
            if(p === "Martin2026") {
                document.getElementById('admin-box').classList.remove('hidden');
            } else {
                alert("Wrong pass");
            }
        }

        function add() {
            let n = document.getElementById('in-name').value;
            let pr = document.getElementById('in-price').value;
            let im = document.getElementById('in-img').value;
            if(n && pr) {
                db.push({name:n, price:pr, img:im});
                draw();
                document.getElementById('in-name').value='';
                document.getElementById('in-price').value='';
                document.getElementById('in-img').value='';
            }
        }

        function del(idx) {
            if(confirm("Delete?")) { db.splice(idx,1); draw(); }
        }

        draw();
    </script>
</body>
</html>
